import streamlit as st
import pandas as pd
from datetime import datetime

# ğŸ”½ ë…ë¦½ìš´ë™ê°€ ë°ì´í„°
people_data = {
    "ì´ë¦„": ["ì•ˆì¤‘ê·¼", "ìœ¤ë´‰ê¸¸", "ì´ë´‰ì°½", "ê¹€ìƒì˜¥", "ìœ ê´€ìˆœ", "ê¹€êµ¬", "ì•ˆì°½í˜¸", "ë°©ì •í™˜", "ì—¬ìš´í˜•", "ê¶Œê¸°ì˜¥", "ë‚¨ìí˜„", "ì‹ ì±„í˜¸", "ì–‘ê¸°íƒ"],
    "ì„œê±°ì—°ë„": ["1910ë…„", "1932ë…„", "1932ë…„", "1923ë…„", "1920ë…„", "1949ë…„", "1938ë…„", "1931ë…„", "1947ë…„", "1988ë…„", "1933ë…„", "1936ë…„", "1938ë…„"],
    "ì„œê±°ì¼": ["3ì›” 26ì¼", "12ì›” 19ì¼", "10ì›” 10ì¼", "1ì›” 22ì¼", "9ì›” 28ì¼", "6ì›” 26ì¼", "3ì›” 10ì¼", "7ì›” 23ì¼", "7ì›” 19ì¼", "4ì›” 19ì¼", "8ì›” 22ì¼", "2ì›” 21ì¼", "4ì›” 19ì¼"],
    "ì£¼ìš”ì—…ì ": ["ì´í† íˆë¡œë¶€ë¯¸ ì €ê²©", "", "", "", "", "", "", "ì–´ë¦°ì´ë‚  ì°½ì‹œì", "", "í•œêµ­ ìµœì´ˆ ì—¬ì„± íŒŒì¼ëŸ¿", "", "", ""]
}
people_df = pd.DataFrame(people_data)
people_df["ì›”ì¼"] = people_df["ì„œê±°ì¼"].str.replace("ì›” ", "-").str.replace("ì¼", "").str.strip()

# ğŸ”½ ë…ë¦½ìš´ë™ ì‚¬ê±´ ë°ì´í„°
event_data = {
    "ë…ë¦½ìš´ë™ì´ë¦„": ["3.1 ìš´ë™", "ê´‘ì£¼í•™ìƒìš´ë™", "ë´‰ì˜¤ë™ ì „íˆ¬", "ì²­ì‚°ë¦¬ ëŒ€ì²©", "í•œì¸ì• êµ­ë‹¨ ì°½ë‹¨"],
    "ë°œìƒë‚ ì§œ": ["3ì›” 1ì¼", "11ì›” 3ì¼", "6ì›” 7ì¼", "10ì›” 21ì¼", "12ì›” 10ì¼"],
    "ê°„ë‹¨ì„¤ëª…": [
        "1919ë…„, ì „êµ­ì—ì„œ ë¹„í­ë ¥ ë…ë¦½ë§Œì„¸ìš´ë™ì´ ì¼ì–´ë‚¨",
        "1929ë…„, ê´‘ì£¼ í•™ìƒë“¤ì´ ì¼ë³¸ì¸ êµì‚¬ì™€ì˜ ê°ˆë“±ì„ ê³„ê¸°ë¡œ ì¼ì œì— í•­ê±°í•¨",
        "1920ë…„, í™ë²”ë„ ì¥êµ°ì´ ì´ë„ëŠ” ë…ë¦½êµ°ì´ ì¼ë³¸êµ°ì— ëŒ€ìŠ¹",
        "1920ë…„, ê¹€ì¢Œì§„ ì¥êµ°ì´ ì£¼ë„í•œ ë…ë¦½êµ° ìµœëŒ€ ì „íˆ¬",
        "1931ë…„ ê¹€êµ¬ê°€ ì¡°ì§í•œ í•­ì¼ í…ŒëŸ¬ ë‹¨ì²´"
    ]
}
events_df = pd.DataFrame(event_data)
events_df["ì›”ì¼"] = events_df["ë°œìƒë‚ ì§œ"].str.replace("ì›” ", "-").str.replace("ì¼", "").str.strip()

# ğŸ–¥ï¸ Streamlit UI
st.title("ğŸ“… ìƒì¼ì— ì¼ì–´ë‚œ ì—­ì‚¬ ì•Œì•„ë³´ê¸°")
selected_date = st.date_input("ë‚ ì§œë¥¼ ì„ íƒí•˜ì„¸ìš”", datetime.today())
month_day = selected_date.strftime("%-m-%-d")  # ex) '3-1'

# ğŸ•¯ï¸ ì„œê±°í•œ ë…ë¦½ìš´ë™ê°€ ì¶œë ¥
matched_people = people_df[people_df["ì›”ì¼"] == month_day]
if not matched_people.empty:
    st.subheader(f"ğŸ•¯ï¸ {selected_date.strftime('%mì›” %dì¼')} ì„œê±°í•œ ë…ë¦½ìš´ë™ê°€")
    for _, row in matched_people.iterrows():
        st.markdown(f"**ì´ë¦„**: {row['ì´ë¦„']}  \n**ì„œê±°ì—°ë„**: {row['ì„œê±°ì—°ë„']}")
        with st.expander("ì£¼ìš” ì—…ì  í¼ì¹˜ê¸°/ì ‘ê¸°"):
            st.write(row["ì£¼ìš”ì—…ì "] if row["ì£¼ìš”ì—…ì "].strip() else "ì •ë³´ ì—†ìŒ")
else:
    st.info("í•´ë‹¹ ë‚ ì§œì— ì„œê±°í•œ ë…ë¦½ìš´ë™ê°€ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.")

# ğŸ”¥ ë…ë¦½ìš´ë™ ì‚¬ê±´ ì¶œë ¥
matched_events = events_df[events_df["ì›”ì¼"] == month_day]
if not matched_events.empty:
    st.subheader(f"ğŸ”¥ {selected_date.strftime('%mì›” %dì¼')} ì¼ì–´ë‚œ ë…ë¦½ìš´ë™ ì‚¬ê±´")
    for _, row in matched_events.iterrows():
        st.markdown(f"**{row['ë…ë¦½ìš´ë™ì´ë¦„']}**  \nğŸ“† {row['ë°œìƒë‚ ì§œ']}  \nğŸ“ {row['ê°„ë‹¨ì„¤ëª…']}")
else:
    st.info("í•´ë‹¹ ë‚ ì§œì— ì¼ì–´ë‚œ ë…ë¦½ìš´ë™ ì‚¬ê±´ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.")
